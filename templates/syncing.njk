<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Codam Coalition System</title>
	<meta name="theme-color" content="#6610f2" />
	<style>
		@font-face {
			font-family: "Bebas Neue";
			src: url('/fonts/bebas-neue/BebasNeue-Regular.ttf');
			font-weight: normal;
		}

		@font-face {
			font-family: "Museo Sans";
			src: url('/fonts/MuseoSans_500.otf');
			font-weight: normal;
		}

		@font-face {
			font-family: "Museo Sans";
			src: url('/fonts/MuseoSans_700.otf');
			font-weight: bold;
		}

		body {
			background-color: #212529;
			color: #f8f9fa;
			font-family: 'Museo Sans', sans-serif;
			margin: 0;
			padding: 0;
		}

		main {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100vh;
			text-align: center;
			padding: 0 20px;
		}

		h1, h2, h3, h4, h5, h6 {
			font-family: 'Bebas Neue', sans-serif;
			font-weight: normal;
		}
	</style>
</head>
<body>
	<main>
		<img src="/img/logo.png" alt="CODAM" height="128" class="mb-4" />
		<h1>Starting the Coalition System...</h1>
		<p>The system is synchronizing with 42's Intra API and is not yet accessible.</p>
		<p><small><b>This page will automatically reload once the system is ready.</b></small></p>
	</main>
	<script>
	function checkSyncStatus() {
		fetch('/status')
			.then(response => response.json())
			.then(data => {
				if (data.initSyncComplete) {
					console.log('Synchronization complete, reloading page...');
					location.reload();
				} else {
					console.log('Still synchronizing...');
					setTimeout(checkSyncStatus, 5000);
				}
			})
			.catch(error => {
				console.error('Error checking synchronization status:', error);
				setTimeout(checkSyncStatus, 5000);
			});
	}
	setTimeout(checkSyncStatus, 5000);
	</script>
</body>
